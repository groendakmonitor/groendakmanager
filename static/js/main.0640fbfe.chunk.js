(this.webpackJsonpgroendakmanager=this.webpackJsonpgroendakmanager||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(11),o=c.n(a),r=(c(16),c(2)),l=function(){return localStorage.getItem("token")},i=function(){return["x-auth-token",l()]},d=c(5),j=c.p+"static/media/groendak.8ad2a181.jpg",b=c(0),m=function(){var e=Object(d.a)(),t=Object(r.a)(e,2),c=(t[0],t[1]),s=Object(n.useState)("safehouse ominous overdrive"),a=Object(r.a)(s,2),o=a[0],l=a[1];return Object(b.jsx)("div",{className:"container d-flex justify-content-center align-items-center vh-100",children:Object(b.jsx)("div",{className:"col col-md-4 user-form py-4 d-flex flex-column",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("img",{src:j,className:"card-img-top"}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h3",{className:"text-center",children:"Log in to groendakmonitor"}),Object(b.jsx)("form",{children:Object(b.jsx)("div",{className:"mt-5",children:Object(b.jsx)("div",{className:"form-group",children:Object(b.jsxs)("label",{className:"form-label text-start w-100",children:["Password",Object(b.jsx)("input",{type:"password",className:"form-control mt-2",onChange:function(e){l(e.currentTarget.value)},value:o})]})})})}),Object(b.jsx)("div",{className:"form-group",children:Object(b.jsx)("button",{className:"w-100 btn btn-success",onClick:function(){fetch("".concat("https://chatter-somber-scallion.glitch.me","/login"),{method:"post",headers:[["Content-Type","application/json"]],body:JSON.stringify({password:o})}).then((function(e){401===e.status?console.warn("WRONG PW"):e.text().then((function(e){var t;t=e,localStorage.setItem("token",t),c("/")}))}))},children:"Login"})})]})]})})})},u=function(e){var t=e.title,c=e.children;return Object(b.jsx)("div",{className:"page-header page-header-light",children:Object(b.jsxs)("div",{className:"page-header-content container header-elements-inline",children:[Object(b.jsx)("div",{className:"page-title d-flex",children:Object(b.jsx)("h2",{className:"font-weight-semibold ml-2",children:t})}),Object(b.jsx)("div",{className:"header-elements",children:c})]})})},h=function(e){var t=e.children;return Object(b.jsx)("div",{className:"page-content",children:Object(b.jsx)("div",{className:"content-wrapper",children:t})})},p=function(){return Object(b.jsxs)("div",{className:"d-flex align-items-center m-3",children:[Object(b.jsx)("strong",{children:"Loading..."}),Object(b.jsx)("div",{className:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]})},O=c(8),f=c(7),g=function(e){var t=e.data,c=e.onUpdateCustomer,s=Object(n.useState)(t),a=Object(r.a)(s,2),o=a[0],l=a[1];Object(n.useEffect)((function(){l(t)}),[t]);var i=function(e){l(Object(f.a)(Object(f.a)({},o),{},Object(O.a)({},e.currentTarget.name,e.currentTarget.value)))},d=Object(n.useRef)(null),j=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e,c=t.location?x(t.location):{lat:51.99954706308361,lng:4.363697780523488};e=new google.maps.Map(d.current,{center:c,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoom:11});var n=new google.maps.Marker({map:e,title:"LOCATION",position:e.getCenter()});e.addListener("center_changed",(function(){l((function(t){return Object(f.a)(Object(f.a)({},t),{},{location:"".concat(e.getCenter().lat(),",").concat(e.getCenter().lng())})})),n.setPosition(e.getCenter())}));var s=j.current,a=new google.maps.places.SearchBox(s);e.controls[google.maps.ControlPosition.TOP_LEFT].push(s),e.addListener("bounds_changed",(function(){a.setBounds(e.getBounds())})),a.addListener("places_changed",(function(){var t=a.getPlaces();if(0!==t.length){var c=new google.maps.LatLngBounds;t.forEach((function(e){e.geometry?e.geometry.viewport?c.union(e.geometry.viewport):c.extend(e.geometry.location):console.log("Returned place contains no geometry")})),e.fitBounds(c)}}))}),[t.location]),Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsxs)("legend",{className:"text-uppercase font-size-sm font-weight-bold d-flex justify-content-between",children:[Object(b.jsx)("span",{className:"d-block",children:"Customer details"}),Object(b.jsxs)("span",{className:"d-block badge badge-info",children:["ID: ",t.id]})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{className:"col-form-label col-lg-3",children:"Name"}),Object(b.jsx)("div",{className:"col-lg-9",children:Object(b.jsx)("div",{className:"input-group",children:Object(b.jsx)("input",{type:"text",className:"form-control",value:o.name,onChange:i,name:"name",placeholder:"name"})})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{className:"col-form-label col-lg-3",children:"Roof size"}),Object(b.jsx)("div",{className:"col-lg-9",children:Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{type:"number",min:"0",className:"form-control",value:o.roof_size,onChange:i,name:"roof_size",placeholder:"roof size"}),Object(b.jsx)("span",{className:"input-group-append",children:Object(b.jsx)("span",{className:"input-group-text",children:"m2"})})]})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{className:"col-form-label col-lg-3",children:"Roof thickness"}),Object(b.jsx)("div",{className:"col-lg-9",children:Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{type:"number",min:"0",className:"form-control",value:o.roof_thickness,onChange:i,name:"roof_thickness",placeholder:"roof thickness"}),Object(b.jsx)("span",{className:"input-group-append",children:Object(b.jsx)("span",{className:"input-group-text",children:"cm"})})]})})]}),Object(b.jsxs)("div",{className:"form-group row",children:[Object(b.jsx)("label",{className:"col-form-label col-lg-3",children:"Location"}),Object(b.jsx)("div",{className:"col-lg-9",children:Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{type:"text",className:"form-control",ref:j}),Object(b.jsx)("div",{ref:d,style:{width:"100%",height:200}})]})})]})]})}),Object(b.jsxs)("div",{className:"card-footer d-flex justify-content-between",children:[Object(b.jsx)("button",{type:"submit",className:"btn btn-light",children:"Delete"}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"button",className:"ml-2 btn btn-primary",onClick:function(){c(o)},children:"Save"})})]})]})},x=function(e){var t=e.split(",").map((function(e){return Number(e)})),c=Object(r.a)(t,2);return{lat:c[0],lng:c[1]}},N=function(e){var t=e.data,c=e.selected,n=e.onClick;return Object(b.jsxs)("tr",{onClick:function(){return n(t)},className:c?"selected":"",children:[Object(b.jsx)("td",{children:Object(b.jsxs)("span",{className:"d-block badge badge-info",children:["ID: ",t.id]})}),Object(b.jsx)("td",{children:t.name})]})},v=(c(18),function(e){var t=e.data,c=e.selectedCustomer,n=e.onCustomerSelect;return Object(b.jsxs)("table",{className:"table table-striped table-hover customer-list",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",style:{width:32},children:"#"}),Object(b.jsx)("th",{scope:"col",children:"Name"})]})}),Object(b.jsx)("tbody",{children:t.map((function(e){return Object(b.jsx)(N,{data:e,onClick:n,selected:c===e},e.id)}))})]})}),y=function(){var e=Object(d.a)(),t=Object(r.a)(e,2),c=(t[0],t[1]),s=Object(n.useState)(),a=Object(r.a)(s,2),o=a[0],j=a[1],m=Object(n.useState)(),O=Object(r.a)(m,2),f=O[0],x=O[1],N=Object(n.useState)(!1),y=Object(r.a)(N,2),C=y[0],w=y[1];Object(n.useEffect)((function(){l()?(w(!0),fetch("".concat("https://chatter-somber-scallion.glitch.me","/customers"),{method:"get",headers:[["Content-Type","application/json"],i()]}).then((function(e){return e.json()})).then((function(e){j(e),w(!1)}))):c("/login")}),[c]);return Object(b.jsxs)(h,{children:[Object(b.jsx)(u,{title:"Customers",children:Object(b.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){var e=prompt("Enter customer name");e&&(w(!0),fetch("".concat("https://chatter-somber-scallion.glitch.me","/customer"),{method:"post",headers:[["Content-Type","application/json"],i()],body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){j(e),w(!1)})))},children:"Add customer"})}),Object(b.jsx)("div",{className:"container mt-4",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card-header d-flex justify-content-between",children:Object(b.jsx)("h3",{children:"Customers"})}),Object(b.jsxs)("div",{className:"card-body p-0",children:[C&&Object(b.jsx)(p,{}),o&&Object(b.jsx)(v,{data:o,onCustomerSelect:x,selectedCustomer:f})]})]})}),Object(b.jsx)("div",{className:"col",children:f&&Object(b.jsx)(g,{data:f,onUpdateCustomer:function(e){console.log(e),w(!0),fetch("".concat("https://chatter-somber-scallion.glitch.me","/customer"),{method:"put",headers:[["Content-Type","application/json"],i()],body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("done",e),j(e),w(!1)}))}})})]})})]})},C=c(9);c(19);var w=function(){return Object(b.jsx)("div",{className:"app",children:Object(b.jsxs)(C.b,{children:[Object(b.jsx)(C.a,{path:"/login",children:Object(b.jsx)(m,{})}),Object(b.jsx)(C.a,{children:Object(b.jsx)(y,{})})]})})},k=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,26)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),s(e),a(e),o(e)}))};c(20),c(21),c(22),c(23),c(24);o.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),k()}],[[25,1,2]]]);
//# sourceMappingURL=main.0640fbfe.chunk.js.map